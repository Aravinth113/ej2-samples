{"index.html":"<html><head><link href=\"https://cdn.syncfusion.com/ej2/material.css\" rel=\"stylesheet\">\n\n    <link href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\" rel=\"stylesheet\">\n\n    <style>\n            body{\n                touch-action:none;\n            }\n        </style></head><body><div class=\"stackblitz-container {{theme}}\">\n<div class=\"col-lg-8 control-section\">\n    <style>\n        .sb-child-row {\n                    margin-top: 8px;\n                }\n            \n                .property-section .e-remove-selection {\n                    cursor: not-allowed;\n                }\n            \n                .row-header {\n                    font-size: 13px;\n                    font-weight: 500;\n                    padding-left: 10px\n                }\n            \n                .e-remove-selection .property-section-content {\n                    pointer-events: none;\n                }\n            </style>\n    <div id=\"diagram\"></div>\n</div>\n<div class=\"col-lg-4 property-section\">\n    <div class=\"property-panel-header\">\n        Properties\n    </div>\n    <div class=\"property-panel-content\">\n        <div id=\"propertypanel\" class=\"e-remove-selection\">\n            <div class=\"property-section-content\">\n                <div class=\"row sb-child-row\">\n                    <div class=\"col-xs-6\">\n                        <div style=\"padding-bottom: 8px\">\n                            Visibility\n                        </div>\n                        <div>\n                            <input type=\"text\" id=\"portsVisiblity\">\n                        </div>\n                    </div>\n                    <div class=\"col-xs-6\">\n                        <div style=\"padding-bottom: 8px\">\n                            Shape\n                        </div>\n                        <div>\n                            <input type=\"text\" id=\"shape\">\n                        </div>\n                    </div>\n                </div>\n                <div class=\"row sb-child-row\">\n                    <div class=\"col-xs-6\">\n                        <div style=\"padding-bottom: 8px\">\n                            Fill Color\n                        </div>\n                        <div style=\"padding-bottom: 8px\">\n                            <input type=\"text\" id=\"fill\">\n                        </div>\n                    </div>\n                    <div class=\"col-xs-6\">\n                        <div style=\"padding-bottom: 8px\">\n                            Stroke Color\n                        </div>\n                        <div style=\"padding-bottom: 8px\">\n                            <input type=\"text\" id=\"border\">\n                        </div>\n                    </div>\n                </div>\n                <div class=\"row sb-child-row\">\n                    <div class=\"col-xs-6\">\n                        <div style=\"padding-bottom: 8px\">\n                            Stroke Width\n                        </div>\n                        <div style=\"padding-bottom: 8px\">\n                            <input type=\"text\" id=\"width\">\n                        </div>\n                    </div>\n                    <div class=\"col-xs-6\">\n                        <div style=\"padding-bottom: 8px\">\n                            Size\n                        </div>\n                        <div style=\"padding-bottom: 8px\">\n                            <input type=\"text\" id=\"size\">\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n\n\n</div></body></html>","index.ts":"{{ripple}}\r\n/**\r\n * Ports sample\r\n */\r\nimport {\r\n    Diagram, NodeModel, ConnectorModel, PointPortModel, PortVisibility, Node, Connector\r\n} from '@syncfusion/ej2-diagrams';\r\nimport { DropDownList, ChangeEventArgs as DropDownChangeEventArgs } from '@syncfusion/ej2-dropdowns';\r\nimport { MultiSelect, MultiSelectChangeEventArgs, CheckBoxSelection } from '@syncfusion/ej2-dropdowns';\r\nimport { NumericTextBox, ChangeEventArgs as NumericChangeEventArgs, ColorPicker, ColorPickerEventArgs } from '@syncfusion/ej2-inputs';\r\nMultiSelect.Inject(CheckBoxSelection);\r\n\r\n\r\n\r\n//Initializes the ports for the diagram\r\nlet node1Port: CustomPort[] = [\r\n    {\r\n        id: 'port1', shape: 'Circle', offset: { x: 0, y: 0.5 }, height: 8, width: 8, visibility: PortVisibility.Visible,\r\n        text: 'In - 1'\r\n    },\r\n    {\r\n        id: 'port2', shape: 'Circle', offset: { x: 1, y: 0.5 }, height: 8, width: 8, visibility: PortVisibility.Visible,\r\n        text: 'OUT - 1'\r\n    },\r\n    {\r\n        id: 'port3', shape: 'Circle', offset: { x: 0.25, y: 1 }, height: 8, width: 8, visibility: PortVisibility.Visible,\r\n        text: 'In - 2'\r\n    },\r\n    {\r\n        id: 'port4', shape: 'Circle', offset: { x: 0.5, y: 1 }, height: 8, width: 8, visibility: PortVisibility.Visible,\r\n        text: 'OUT - 2'\r\n    },\r\n    {\r\n        id: 'port5', shape: 'Circle', offset: { x: 0.75, y: 1 }, height: 8, width: 8, visibility: PortVisibility.Visible,\r\n        text: 'In - 3'\r\n    }\r\n];\r\n\r\nlet node2Port: CustomPort[] = [\r\n    {\r\n        id: 'port6', shape: 'Circle', offset: { x: 0, y: 0.5 }, height: 8, width: 8, visibility: PortVisibility.Visible,\r\n        text: 'In - 1'\r\n    },\r\n    {\r\n        id: 'port7', shape: 'Circle', offset: { x: 1, y: 0.35 }, height: 8, width: 8, visibility: PortVisibility.Visible,\r\n        text: 'OUT - 1'\r\n    },\r\n    {\r\n        id: 'port8', shape: 'Circle', offset: { x: 1, y: 0.70 }, height: 8, width: 8, visibility: PortVisibility.Visible,\r\n        text: 'In - 2'\r\n    },\r\n    {\r\n        id: 'port9', shape: 'Circle', offset: { x: 0.5, y: 1 }, height: 8, width: 8, visibility: PortVisibility.Visible,\r\n        text: 'OUT - 2'\r\n    }\r\n];\r\n\r\nlet node3Port: CustomPort[] = [\r\n    {\r\n        id: 'port10', shape: 'Circle', offset: { x: 0, y: 0.5 }, height: 8, width: 8, visibility: PortVisibility.Visible,\r\n        text: 'Out - 1'\r\n    },\r\n    {\r\n        id: 'port11', shape: 'Circle', offset: { x: 0.5, y: 0 }, height: 8, width: 8, visibility: PortVisibility.Visible,\r\n        text: 'In - 1'\r\n    },\r\n    {\r\n        id: 'port12', shape: 'Circle', offset: { x: 0.5, y: 1 }, height: 8, width: 8, visibility: PortVisibility.Visible,\r\n        text: 'OUT - 2'\r\n    }\r\n];\r\n\r\nlet node4Port: CustomPort[] = [\r\n    {\r\n        id: 'port13', shape: 'Circle', offset: { x: 0, y: 0.5 }, height: 8, width: 8, visibility: PortVisibility.Visible,\r\n        text: 'In - 1'\r\n    },\r\n    {\r\n        id: 'port14', shape: 'Circle', offset: { x: 0.5, y: 0 }, height: 8, width: 8, visibility: PortVisibility.Visible,\r\n        text: 'In - 2'\r\n    },\r\n    {\r\n        id: 'port15', shape: 'Circle', offset: { x: 0.5, y: 1 }, height: 8, width: 8, visibility: PortVisibility.Visible,\r\n        text: 'OUT - 1'\r\n    }\r\n];\r\n\r\nlet node5Port: CustomPort[] = [\r\n    {\r\n        id: 'port16', shape: 'Circle', offset: { x: 0, y: 0.5 }, height: 8, width: 8, visibility: PortVisibility.Visible,\r\n        text: 'out - 1'\r\n    },\r\n    {\r\n        id: 'port17', shape: 'Circle', offset: { x: 0.5, y: 0 }, height: 8, width: 8, visibility: PortVisibility.Visible,\r\n        text: 'In - 1'\r\n    },\r\n    {\r\n        id: 'port18', shape: 'Circle', offset: { x: 1, y: 0.5 }, height: 8, width: 8, visibility: PortVisibility.Visible,\r\n        text: 'OUT - 2'\r\n    }\r\n];\r\n\r\nlet node6Port: CustomPort[] = [\r\n    {\r\n        id: 'port19', shape: 'Circle', offset: { x: 0, y: 0.35 }, height: 8, width: 8, visibility: PortVisibility.Visible,\r\n        text: 'In - 1'\r\n    },\r\n    {\r\n        id: 'port20', shape: 'Circle', offset: { x: 0.5, y: 1 }, height: 8, width: 8, visibility: PortVisibility.Visible,\r\n        text: 'Out - 1'\r\n    }\r\n];\r\n\r\nlet node7Port: CustomPort[] = [\r\n    {\r\n        id: 'port21', shape: 'Circle', offset: { x: 0.5, y: 0 }, height: 8, width: 8, visibility: PortVisibility.Visible,\r\n        text: 'In - 1'\r\n    },\r\n    {\r\n        id: 'port22', shape: 'Circle', offset: { x: 0.5, y: 1 }, height: 8, width: 8, visibility: PortVisibility.Visible,\r\n        text: 'Out - 1'\r\n    }\r\n];\r\n\r\nexport interface CustomPort extends PointPortModel {\r\n    text: string;\r\n}\r\n// tslint:disable-next-line:max-func-body-length\r\n\r\n    \r\n    let bounds: ClientRect = document.getElementsByClassName('control-section')[0].getBoundingClientRect();\r\n    let centerX: number = bounds.width / 2;\r\n\r\n    let nodes: NodeModel[] = [\r\n        {\r\n            id: 'node1', offsetX: centerX - 200, offsetY: 100,\r\n            annotations: [{ content: 'Publisher' }], ports: node1Port\r\n        },\r\n        {\r\n            id: 'node2', offsetX: centerX, offsetY: 100,\r\n            annotations: [{ content: 'Completed Book', margin: { left: 5, right: 5 } }], ports: node2Port\r\n        },\r\n        {\r\n            id: 'node3', offsetX: centerX, offsetY: 200,\r\n            annotations: [{ content: '1st Review' }], ports: node3Port\r\n        },\r\n        {\r\n            id: 'node4', offsetX: centerX, offsetY: 300,\r\n            annotations: [{ content: 'Legal Terms' }], ports: node4Port\r\n        },\r\n        {\r\n            id: 'node5', offsetX: centerX, offsetY: 400,\r\n            annotations: [{ content: '2nd Review' }], ports: node5Port\r\n        },\r\n        {\r\n            id: 'node6', offsetX: centerX + 200, offsetY: 100,\r\n            annotations: [{ content: 'Board' }], ports: node6Port\r\n        },\r\n        {\r\n            id: 'node7', offsetX: centerX + 200, offsetY: 200,\r\n            annotations: [{ content: 'Approval' }], ports: node7Port\r\n        }\r\n    ];\r\n    let connectors: ConnectorModel[] = [\r\n        {\r\n            id: 'connector1', sourceID: 'node1', sourcePortID: 'port2',\r\n            targetID: 'node2', targetPortID: 'port6'\r\n        },\r\n        {\r\n            id: 'connector2', sourceID: 'node1', sourcePortID: 'port4',\r\n            targetID: 'node4', targetPortID: 'port13'\r\n        },\r\n        {\r\n            id: 'connector3', sourceID: 'node2', sourcePortID: 'port9',\r\n            targetID: 'node3', targetPortID: 'port11'\r\n        },\r\n        {\r\n            id: 'connector4', sourceID: 'node2', sourcePortID: 'port7',\r\n            targetID: 'node6', targetPortID: 'port19'\r\n        },\r\n        {\r\n            id: 'connector5', sourceID: 'node3', sourcePortID: 'port10',\r\n            targetID: 'node1', targetPortID: 'port5'\r\n        },\r\n        {\r\n            id: 'connector6', sourceID: 'node3', sourcePortID: 'port12',\r\n            targetID: 'node4', targetPortID: 'port14'\r\n        },\r\n        {\r\n            id: 'connector7', sourceID: 'node4', sourcePortID: 'port15',\r\n            targetID: 'node5', targetPortID: 'port17'\r\n        },\r\n        {\r\n            id: 'connector8', sourceID: 'node5', sourcePortID: 'port18',\r\n            targetID: 'node2', targetPortID: 'port8'\r\n        },\r\n        {\r\n            id: 'connector9', sourceID: 'node5', sourcePortID: 'port16',\r\n            targetID: 'node1', targetPortID: 'port3'\r\n        },\r\n        {\r\n            id: 'connector10', sourceID: 'node6', sourcePortID: 'port20',\r\n            targetID: 'node7', targetPortID: 'port21'\r\n        },\r\n        {\r\n            id: 'connector11', sourceID: 'node7', sourcePortID: 'port22',\r\n            targetID: 'node1', targetPortID: 'port1'\r\n        }\r\n    ];\r\n\r\n    //Initialize diagram control\r\n    let diagram: Diagram = new Diagram({\r\n        width: '100%', height: 580,\r\n        nodes: nodes, connectors: connectors, selectionChange: selectionChange,\r\n        snapSettings: { constraints: 0 },\r\n        //Sets the default values of nodes\r\n        getNodeDefaults: (obj: Node) => {\r\n            //Initialize shape\r\n            if (obj.id === 'node1' || obj.id === 'node2' || obj.id === 'node4' || obj.id === 'node6') {\r\n                obj.shape = { type: 'Basic', shape: 'Rectangle' };\r\n            } else if (obj.id === 'node3' || obj.id === 'node5' || obj.id === 'node7') {\r\n                obj.shape = { type: 'Basic', shape: 'Diamond' };\r\n            }\r\n            //sets height and width for nodes\r\n            obj.height = 65;\r\n            obj.width = 100;\r\n            obj.style = { fill: '#ebf8fb', strokeColor: '#baeaf5' };\r\n            for (let i: number = 0; i < obj.ports.length; i++) {\r\n                //sets styles for the ports\r\n                obj.ports[i].style = {\r\n                    fill: '#366f8c',\r\n                    strokeColor: '#366f8c'\r\n                };\r\n                obj.ports[i].width = 6;\r\n                obj.ports[i].height = 6;\r\n            }\r\n            obj.annotations[0].style = {\r\n                fontSize: 13,\r\n                color: 'black'\r\n            };\r\n        },\r\n        //Sets the default values of connector\r\n        getConnectorDefaults: (connector: Connector) => {\r\n            //defines type of the connectors\r\n            connector.type = 'Orthogonal';\r\n            connector.style = { strokeColor: '#8cdcef', strokeWidth: 1 };\r\n            connector.targetDecorator = { width: 5, height: 5, style: { fill: '#8cdcef', strokeColor: '#8cdcef' } };\r\n        },\r\n    });\r\n    diagram.appendTo('#diagram');\r\n\r\n    //Visibility collection of the Port.\r\n    let visibility: { [key: string]: Object }[] = [\r\n        { PortVisibility: PortVisibility.Visible, text: 'Visible' },\r\n        { PortVisibility: PortVisibility.Hidden, text: 'Hidden' },\r\n        { PortVisibility: PortVisibility.Hover, text: 'Hover' },\r\n        { PortVisibility: PortVisibility.Connect, text: 'Connect' }\r\n    ];\r\n    //Enable or disable the visibility of the Port\r\n    let portVisibilityDrop: MultiSelect = new MultiSelect({\r\n        enabled: true, dataSource: visibility,\r\n        fields: { value: 'PortVisibility', text: 'text' },\r\n        mode: 'CheckBox',\r\n        showSelectAll: true,\r\n        showDropDownIcon: true,\r\n        popupHeight: '280px',\r\n        popupWidth: '180px',\r\n        change: portVisibilityChange,\r\n    });\r\n    portVisibilityDrop.appendTo('#portsVisiblity');\r\n    //Colorpicker used to apply for fill color of the Port.\r\n    let portFillColor: ColorPicker = new ColorPicker({\r\n        value: '#000', disabled: false, change: (arg: ColorPickerEventArgs) => {\r\n            let port: PointPortModel[] = getPort();\r\n            for (let j: number = 0; j < port.length; j++) {\r\n                port[j].style.fill = arg.currentValue.rgba;\r\n            }\r\n        }\r\n    });\r\n    portFillColor.appendTo('#fill');\r\n    //Colorpicker used to apply for stroke color of the Port.\r\n    let portBorderColor: ColorPicker = new ColorPicker({\r\n        value: '#000', disabled: false, change: (arg: ColorPickerEventArgs) => {\r\n            let port: PointPortModel[] = getPort();\r\n            for (let j: number = 0; j < port.length; j++) {\r\n                port[j].style.strokeColor = arg.currentValue.rgba;\r\n            }\r\n        }\r\n    });\r\n    portBorderColor.appendTo('#border');\r\n\r\n    //Shape collection of the Port.\r\n    let shape: { [key: string]: Object }[] = [\r\n        { shape: 'X', text: 'X' },\r\n        { shape: 'Circle', text: 'Circle' },\r\n        { shape: 'Square', text: 'Square' },\r\n        { shape: 'Custom', text: 'Custom' }\r\n    ];\r\n    //DropDownList is used to apply the shape of the Port.\r\n    let portShapeDrop: DropDownList = new DropDownList({\r\n        enabled: true, placeholder: 'Select a Shape', value: 'Circle',\r\n        dataSource: shape, fields: { value: 'shape', text: 'text' },\r\n        change: portShapeChange\r\n    });\r\n    portShapeDrop.appendTo('#shape');\r\n    //NumericTextBox is used to apply the size of the Port.\r\n    let portSizeNum: NumericTextBox = new NumericTextBox({\r\n        enabled: true, format: '###.##',\r\n        value: 6, min: 1, step: 1,\r\n        change: (args: NumericChangeEventArgs) => {\r\n            applyPortStyle('size');\r\n        }\r\n    });\r\n    portSizeNum.appendTo('#size');\r\n    //NumericTextBox is used to apply the StrokeWidth of the Port.\r\n    let portWidthNum: NumericTextBox = new NumericTextBox({\r\n        enabled: true, format: '###.##',\r\n        value: 1, step: 0.5, min: 0,\r\n        change: (args: NumericChangeEventArgs) => {\r\n            applyPortStyle('strokewidth');\r\n        }\r\n    });\r\n    portWidthNum.appendTo('#width');\r\n    diagram.select([diagram.nodes[0]]);\r\n\r\n    //get the port for the selected node.\r\n    function getPort(): PointPortModel[] {\r\n        let node: NodeModel = diagram.selectedItems.nodes[0];\r\n        let ports: PointPortModel[] = node.ports;\r\n        return ports;\r\n    }\r\n    //enable or disable the property panel based on the Selection.\r\n    function selectionChange(args: any): void {\r\n        if (args.state === 'Changed') {\r\n            let appearance: HTMLElement = document.getElementById('propertypanel');\r\n            let selectedElement: HTMLCollection = document.getElementsByClassName('e-remove-selection');\r\n            if (args.newValue) {\r\n\r\n                if (args.newValue[0] instanceof Node && selectedElement.length) {\r\n                    selectedElement[0].classList.remove('e-remove-selection');\r\n                    let port: PointPortModel = getPort()[0];\r\n                    portVisibilityDrop.value = [] as number[];\r\n                    if (PortVisibility.Visible & port.visibility) {\r\n                        portVisibilityDrop.value.push(PortVisibility.Visible);\r\n                    }\r\n                    if (PortVisibility.Hidden & port.visibility) {\r\n                        portVisibilityDrop.value.push(PortVisibility.Hidden);\r\n                    }\r\n                    if (PortVisibility.Hover & port.visibility) {\r\n                        portVisibilityDrop.value.push(PortVisibility.Hover);\r\n                    }\r\n                    if (PortVisibility.Connect & port.visibility) {\r\n                        portVisibilityDrop.value.push(PortVisibility.Connect);\r\n                    }\r\n                    if (portVisibilityDrop.value.length === 0) {\r\n                        portVisibilityDrop.placeholder = 'Select Visibility';\r\n                    }\r\n                    portVisibilityDrop.dataBind();\r\n                    portFillColor.value = port.style.fill;\r\n                    portFillColor.dataBind();\r\n                    portBorderColor.value = port.style.strokeColor;\r\n                    portBorderColor.dataBind();\r\n                    portShapeDrop.value = port.shape;\r\n                    portShapeDrop.dataBind();\r\n                    portSizeNum.value = port.height;\r\n                    portSizeNum.dataBind();\r\n                    portWidthNum.value = port.style.strokeWidth;\r\n                    portWidthNum.dataBind();\r\n                }\r\n            }\r\n        }\r\n    }\r\n    //set the appearence of the Port.\r\n    function applyPortStyle(value: string): void {\r\n        let port: PointPortModel[] = getPort();\r\n        for (let j: number = 0; j < port.length; j++) {\r\n            if (value === 'size' && portSizeNum) {\r\n                port[j].height = portSizeNum.value;\r\n                port[j].width = portSizeNum.value;\r\n            } else if (value === 'strokewidth' && portWidthNum) {\r\n                port[j].style.strokeWidth = portWidthNum.value;\r\n            }\r\n        }\r\n        diagram.dataBind();\r\n    }\r\n    //change the Visibility of the Port.\r\n    function portVisibilityChange(args: MultiSelectChangeEventArgs): void {\r\n        let port: PointPortModel[] = getPort();\r\n        if (port) {\r\n            for (let j: number = 0; j < port.length; j++) {\r\n                port[j].visibility = 0;\r\n                for (let i: number = 0; i < args.value.length; i++) {\r\n                    port[j].visibility += args.value[i] as PortVisibility;\r\n                }\r\n                diagram.dataBind();\r\n            }\r\n        }\r\n    }\r\n    //change the shape of the Port.\r\n    function portShapeChange(args: DropDownChangeEventArgs): void {\r\n        let port: PointPortModel[] = getPort();\r\n        for (let j: number = 0; j < port.length; j++) {\r\n            switch (portShapeDrop.value) {\r\n                case 'X':\r\n                    port[j].shape = 'X';\r\n                    break;\r\n                case 'Circle':\r\n                    port[j].shape = 'Circle';\r\n                    break;\r\n                case 'Square':\r\n                    port[j].shape = 'Square';\r\n                    break;\r\n                case 'Custom':\r\n                    port[j].shape = 'Custom';\r\n                    port[j].pathData = 'M6.805,0L13.61,10.703L0,10.703z';\r\n                    break;\r\n            }\r\n            diagram.dataBind();\r\n        }\r\n\r\n    }\r\n\r\n\r\n"}